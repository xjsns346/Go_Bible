# MySQL学习笔记

## 基础指令

1. 需要以管理员身份打开命令行提示符，进行mysql操作。
- net start mysql 来启动mysql。
- net stop mysql 来关闭mysql。

2. mysql -h 主机地址 -P 端口号 -u 用户名 -p
- -p密码中间不要有空格
- 如果没有写主机和端口，默认为主机和3306
- 实际工作中一般修改端口3306

3. create database 数据库名称     创建数据库
    drop database 数据库名称    删除数据库(慎重)
    show databases             显示所有数据库
    show create database 数据库名称    显示数据库创建语句
    mysqldump -u 用户名 -p -B 数据库1 数据库2 数据库n > 文件名.sql   备份数据库(在DOS下执行)
    - 备份数据库的语句不需要进入mysql client 就可以执行，因为mysql专门提供了一个备份程序。
    - 不能在 mysql client 里执行数据库备份。因为 mysqldump 本身不是 SQL指令，mysqldump 是一个 OS 的外部程序，不是 MySQL内部命令。
    Source 文件名.sql  恢复数据库(进入sqlyog再执行)


## 常见错误
1. ERROR 1045 基本上 99% 就是：
- 用户名错
- 密码错
- host不匹配（比如你用 localhost，但是用户是在 127.0.0.1 或 '%' 中创建的）



## MySQL 三层架构详解

MySQL 的系统结构可以分为三层：

1️⃣ 客户端层（连接层）  
2️⃣ 服务层（SQL 层 / 管理层）  
3️⃣ 存储引擎层（数据层）

---

### 🏗 架构图（文本版）

```text
┌────────────────────────────────────────────┐
│                客户端层（连接层）            │
│────────────────────────────────────────────│
│ - 负责与客户端建立连接                     │
│ - 用户身份认证、安全检查                   │
│ - 管理连接池与通信协议                     │
│--------------------------------------------│
│ 例：mysql命令行、Workbench、应用程序连接等 │
└────────────────────────────────────────────┘
                     │
                     ▼
┌────────────────────────────────────────────┐
│            服务层（SQL 层 / 管理层）        │
│────────────────────────────────────────────│
│ - 解析 SQL 语句（Parser）                  │
│ - 语义分析与语法树构建                     │
│ - 查询优化（Optimizer）                    │
│ - 执行计划生成与执行（Executor）           │
│ - 管理查询缓存、权限、事务、日志等         │
│--------------------------------------------│
│ 例：SQL 解析器、优化器、执行器、缓存模块   │
└────────────────────────────────────────────┘
                     │
                     ▼
┌────────────────────────────────────────────┐
│              存储引擎层（数据层）           │
│────────────────────────────────────────────│
│ - 真正执行数据的存储与读取操作             │
│ - 提供统一的接口供上层调用（可插拔结构）   │
│--------------------------------------------│
│ 常见引擎：                                 │
│   • InnoDB（支持事务、行锁、外键）         │
│   • MyISAM（读多写少场景）                 │
│   • Memory（内存存储）                     │
│   • CSV / Archive / Blackhole 等           │
└────────────────────────────────────────────┘
                     │
                     ▼
┌────────────────────────────────────────────┐
│               磁盘与文件系统                │
│────────────────────────────────────────────│
│ - 存放表数据（.ibd / .frm / .ibdata 等）  │
│ - 日志文件（redo / undo / binlog）         │
│ - 索引文件、配置文件                       │
└────────────────────────────────────────────┘




