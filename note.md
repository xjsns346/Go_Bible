# Go 学习笔记

## MarkDown 要点:
1.ctrl + shift + v   可以在vs code 预览文件效果
2.

## 入门

gofmt工具格式化时按照字母顺序对包名排序。  

Go语言只有for循环这一种循环语句。

空标识符可用于在任何语法需要变量名但程序逻辑不需要的时候（如：在循环里）丢弃不需要的循环索引，并保留元素值。

当你运行 go run xxx.go 的时候，Go 会先 编译 .go 文件 → 生成一个 .exe → 把它放到 AppData\Local\go-build 这个缓存目录。
这个.exe文件是一个临时可执行文件，下次运行.go文件时会创建一个新的.exe文件

map的迭代顺序并不确定,类似于python的字典类型

os.Stdin,os.Stdout,os.Stderr都是*os.file类型的值

程序员通常不需要关心 int/uint 的精确大小，只要用它们表示“一般整数”就行。
当处理网络协议、文件格式时，才用 int32、uint16 等。

### 查找重复的行
-小文件（配置文件、少量数据） → os.ReadFile，简单方便。
-大文件（日志、数据集） → bufio.Scanner 或 bufio.Reader，节省内存。  

在 Go 里，只有 package main 且包含 func main() 函数的包，才能编译成一个可执行文件。

### 获取URL
在同一作用域里，:= 遇到旧变量时：
1.如果左边有新变量 → 旧变量被复用，新变量被定义。
2.如果左边全是旧变量 → 编译报错。

| 特性         | `io.ReadAll`           | `io.Copy`            |
| --- | --- | --- |
| 返回结果*  | `[]byte`（全部数据）         | 字节数（已写到 `dst`）       |
| 内存占用* | 和数据大小成正比，可能很大          | 固定缓冲区（约 32KB）        |
| 适用场景   | 小文件、小 HTTP 响应，结果需要直接操作 | 大文件、大流式数据，结果要写到文件/网络 |
| 是否阻塞内存 | 是，会占住内存直到数据全读完         | 否，边读边写，流式处理          |


## 程序结构

### 类型
许多类型都会定义一个String方法，因为当使用fmt包的打印方法时，将会优先使用该类型对应的String方法返回的结果打印，但是当使用%g时，不会调用string方法。
在圣经的例子中，%g没有调用string方法，因为%g 专门用于 浮点数格式化，而不是通用字符串格式化。


### 包和文件

在每个源文件的包声明前紧跟着的注释是包注释。通常，包注释的第一句应该先是包的功能概要说明。一个包通常只有一个源文件有包注释,如果有多个包注释，目前的文档工具会根据源文件名的先后顺序将它们链接为一个包注释。如果包注释很大，通常会放到一个独立的doc.go文件中。

一个目录下的所有 .go 文件必须属于同一个包。

按照惯例，一个包的名字和包的导入路径的最后一个字段相同。



## 基础数据类型

### 整型

取模运算符%仅用于整数间的运算。在Go语言中，%取模运算符的符号和被取模数的符号总是一致的，因此-5%3和-5%-3结果都是-2。  

x &^ y 的作用就是：把 x 里，y 为 1 的位置清零，其他位置保持不变。(二进制)

1. 左移运算符 <<
表达式：x << n
含义：把 x 的二进制位整体 向左移动 n 位，右边空出来的位用 0 填充。
👉 数学效果：相当于 乘以 2ⁿ（前提是不溢出）。

2. 右移运算符 >>
表达式：x >> n
含义：把 x 的二进制位整体 向右移动 n 位。
左边空出来的位，规则要分情况：
无符号整数：高位补 0（逻辑右移）。
有符号整数：Go 里会补 符号位（算术右移）。
👉 数学效果：相当于 除以 2ⁿ，取整。  

|名称|符号|
|---|---|
|AND|&|
|OR|\||
|XOR|^|
|左移|<<|
|右移|>>|


### 变量
flag 包就是 Go 官方提供的 命令行参数解析工具，适合写小工具、脚本或服务时用来配置参数。  

编译器会自动选择在栈上还是在堆上分配局部变量的存储空间，这个选择并不是由用var还是new声明变量的方式决定的。


## 复合数据类型

###  结构体  
  
  对于结构体的指针，可以直接使用点操作符，编译器会自动调用解引用。  

  一个结构体可能同时包含导出和未导出的成员。如果结构体成员名字是以大写字母开头的，那么该成员就是导出的。